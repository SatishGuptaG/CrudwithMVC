
@{
    ViewBag.Title = "Index";
}
<h2 class="text-center">Registration Form</h2>
<div class="container-fluid min-vh-100 w-50 justify-content-center">
    <form class="mb-3"  action="#">
        <div class="mb-3" action="#">
            <label>UserName</label>
            <input type="text" class="form-control" id="UserName" placeholder="UserName" onkeyup="validateForm()">
            <span id="NameError" class="text-danger"></span>
        </div>
        <div class="mb-3" action="#">
            <label>Email</label>
            <input type="email" class="form-control" id="Email" placeholder="Email" onkeyup="validateForm()">
            <span id="EmailError" class="text-danger"></span>
        </div>
        <div class="mb-3" action="#">
            <label>MobileNumber</label>
            <input type="number" class="form-control" id="MobileNumber" placeholder="MobileNumber" onkeyup="validateForm()">
            <span id="MobileError" class="text-danger"></span>
        </div>
        <div class="mb-3" action="#">
            <label>Password</label>
            <input type="password" class="form-control" id="Password" placeholder="password" onkeyup="validateForm()">
            <span id="PasswordError" class="text-danger"></span>
        </div>
        <div class="mb-3" action="#">
            <label class="">ConfirmPassword</label>
            <input type="password" class="form-control" id="ConfirmPassword" placeholder="ConfirmPassword" onkeyup="validateForm()">
            <span id="ConfirmError" class="text-danger"></span>
        </div>
        <button class="d-grid btn btn-primary w-50 mx-auto" type="submit" value="Submit" onclick ="submitI()">Summit</button>
    </form>
</div>
@* Validation *@
<script>
    function validateForm() {
        var userName = document.getElementById("UserName").value;
        var EMAIL = document.getElementById("Email").value;
        var MOBILE = document.getElementById("MobileNumber").value;
        var PASSWORD = document.getElementById("Password").value;
        var CONFIRMPASSWORD = document.getElementById("ConfirmPassword").value;

        if (userName.length == 0) {
            document.getElementById('NameError').innerHTML = "Please Enter Your UserName";
            return false;
        } else {
            document.getElementById('NameError').innerHTML = "";
        }
      
        if (EMAIL.length == 0) {
            document.getElementById('EmailError').innerHTML = "Please Enter Your E-Mail";
            return false;
        } else {
            document.getElementById('EmailError').innerHTML = "";
        }
       
        if (MOBILE.length == 0) {
            document.getElementById('MobileError').innerHTML = "Please Enter Your Mobile Number";
            return false;
        } else {
            document.getElementById('MobileError').innerHTML = "";
        }
       
        if (PASSWORD.length == 0) {
            document.getElementById('PasswordError').innerHTML = "Please Enter Your Password";
            return false;
        } else {
            document.getElementById('PasswordError').innerHTML = "";
        }
       
        if (CONFIRMPASSWORD.length == 0) {
            document.getElementById('ConfirmError').innerHTML = "Please Enter Your Confirm Password";
        }
        else if (CONFIRMPASSWORD !== PASSWORD) {
            document.getElementById('ConfirmError').innerHTML = "Password and Confirm Password are not matched";
            return false;
        } else {
            document.getElementById('ConfirmError').innerHTML = "";
        }

        // All validations passed
        return true;
    }

    function submitI() {

        if (!validateForm()) {
            return;
        }

        // If validation passes, fetch all field data and proceed with form submission
        var userName = document.getElementById("UserName").value.trim();
        var EMAIL = document.getElementById("Email").value.trim();
        var MOBILE = document.getElementById("MobileNumber").value.trim();
        var PASSWORD = document.getElementById("Password").value.trim();
       // var CONFIRMPASSWORD = document.getElementById("ConfirmPassword").value.trim();
        
        // Create a FormData object to store the form data
        var formData = new FormData();
        formData.append("UserName", userName);
        formData.append("Email", EMAIL);
        formData.append("MobileNumber", MOBILE);
        formData.append("Password", PASSWORD);
      //  formData.append("ConfirmPassword", CONFIRMPASSWORD);

        // Send a POST request using fetch
        fetch("/User/NewUser", {
            method: "POST",
            body: formData
        })
        .then(response => {
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json();
        })
        .then(data => {
            // Handle the response data as needed
            console.log(data);
        })
        .catch(error => {
            console.error("There was a problem with the fetch operation:", error);
        });
    }



</script>


